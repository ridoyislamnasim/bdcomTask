

<%- include(`../common/header.ejs`); %>
<section class="home-section">
  <div class="home-content">
    <%- include(`../common/landingMenu.ejs`); %>

    <div class="manage-container">
      <div id="title">
        <h2>Manage User</h2>
      </div>

      <div id="rooms-Info">
        <div class="table_top">
          <div class="left">
            <% if (role === 'admin') { %>
              <button class="newadd" onclick="openAddModal()">Add New user</button>
          <% } else { %>
             
          <% } %>
            
          </div>
          
        </div>
        
        <div id="showData" >
          <div class="user-info-level">
            <span class="userNameLevel">name</span>
            <span class="userEmailLevel">email</span>
            <% if (role === 'admin') { %>
              <span class="editLevel">edit</span>
          <% } else { %>
              <span class="editLevel"></span>
          <% } %>
          </div>
          
        <% for(let user of users){%>
        <div class="pagination-data" style="display: block;">
          <div class="user_header">
            <div class="user-info">
              <span class="userName"><%= user.name %></span>
              <span class="userEmail"><%= user.email %></span>
              <% if (role === 'admin') { %>
                <div class="edit-delete">
                  <a href="#" onclick="editHandel(this,'<%= user._id   %>')">
                    <!-- edit -->
                    <i class="fa-regular fa-pen-to-square"></i>
                  </a>
                  <a method="delete" href="#" onclick="openDeleteModal('<%=user._id %>')">
                    <!-- delete -->
                    <i class="fa-regular fa-trash-can"></i>
                  </a>
              </div>
            <% } else { %>
              <div class="edit-delete"></div>
            <% } %>
 
            </div>
          </div>
          
        </div>
        <%} %>

      </div>   

      </div>
    </div>
  </div>
</section>




<!-- manu open close -->

<!-- must be add 
  1.pagination records per page
  2.pagination records where show, id="showData
  3.pagination each records , div.class="pagination-data" ,strat = which loop data pagination make this loop inner to start,end-> where each records end
  3. pagination footer
-->


<script>
//   // functiondataInformationResived(){}
//    // Get a reference to the div element, where show  genarate pganiantion information 
//   const showData = document.getElementById("showData");
//    // how many div has find this  
//   let total_records_div = document.querySelectorAll(".table-data");
//    // one page howmany records show 
//   let records_size = document.getElementById('records_size')
//   let records_per_page = 5;
//   let page_number = 1; 
//   let total_records = total_records_div.length
//   let total_pages = Math.ceil( total_records / records_per_page)
//   grnaratePagination()
//   DisplayRecords()
//   function DisplayRecords(){
//     let start_index  =  (page_number - 1) * records_per_page;
//     let end_index  =  start_index + (records_per_page );
//     if(end_index >=total_records){
//       end_index = total_records
//     }
//     let statement ='';
//     for (let index = start_index; index < end_index; index++) {
//       console.log("--------------",total_records_div[index].innerHTML)
//       // data_show_div.innerHTML = total_records_div[index].innerHTML
//       statement += `${total_records_div[index].innerHTML}`
      
//     }
//     // Set the HTML content into the div
// showData.innerHTML = statement;
// document.querySelectorAll(".pagination_link").forEach(item=>{
//   item.classList.remove('active')
// })
// if(page_number == 1){
//         document.getElementById('prvBtn').classList.add('active')
//       }
//       if(page_number == total_pages){
//         document.getElementById('nextBtn').classList.add('active')
//       }
// document.getElementById(`page${page_number}`).classList.add('active')
// document.getElementById('page_details').innerHTML =`Showing ${start_index + 1} to ${end_index} of ${total_records}`
// // if (page_number == 1 ) {
// //   document.getElementById('prvBtn').classList.add('active')
  
// // }
    
//   }


//   function grnaratePagination(){ 
//     let prv_btn = `<div class="pagination_item" aria-disabled="true">
//               <a class="pagination_link active" id='prvBtn' onclick='prvBtn()' href="javascript:void(0)" aria-disabled="true">Previous</a>
//             </div>`
//     let next_btn = `<div class="pagination_item">
//               <a class="pagination_link" id='nextBtn' onclick='nextBtn()' href="javascript:void(0)">Next</a>
//             </div>`
//             let pagination_page_number ='';
//             let activeClass ='';
//             for (let index = 1; index <= total_pages; index++) {
//               if (index==1) {
//                 activeClass='active'
//               } else {
//                 activeClass=''
//               }
//                 pagination_page_number += `<div class="pagination_item">
//               <a class="pagination_link ${activeClass} "  id='page${index}' onclick='goPage(${index})'  href="javascript:void(0)">${index}</a>
//             </div>`
//             }
//             document.getElementById('pagination').innerHTML = `${prv_btn} ${pagination_page_number} ${next_btn} `
            
//   }

//   function prvBtn(){
//     console.log("+++++++++++++++++++++++++++++++++++",page_number)
//     if (page_number > 1) {
//       page_number--;
//       DisplayRecords();
//     }
//   }
//   function nextBtn(){
//     console.log("+++++++++++++++++++++++++++++++++++",page_number,total_pages)
//     if (page_number < total_pages) {
//       page_number++;
//     DisplayRecords();
//     }
//   }
//   function goPage(pageNumber){
//     console.log("///////////////////////",typeof pageNumber)
//     console.log("///////////////////////",typeof parseInt(pageNumber) )
//     page_number = parseInt(pageNumber) 
//     DisplayRecords();
//   }
//    records_size.addEventListener('change',function(e){
//     records_per_page = records_size.value;
//     total_pages = Math.ceil( total_records / records_per_page)
//    page_number = 1; 
//     grnaratePagination()
//   DisplayRecords()
//    })


//   // data_show_div.innerHTML = "statement";
//   // let coloumsmax = document.getElementById("coloumsmax");
//   console.log("total_records_div", total_records_div)
//   console.log("total_records_div",typeof  total_records_div)
//   console.log("total_records_div", typeof records_per_page)
//   console.log("total_records_div", total_records_div.length,total_pages)
</script>

<script>
  // $(document).ready(function() {
  //   $('#roomTable').DataTable({
  //     "pagingType": "full_numbers",
  //   "oLanguage": {
  //     "oPaginate": {
  //       "sFirst": "First",
  //       "sPrevious": "Previous",
  //       "sNext": "Next",
  //       "sLast": "Last"
  //     }
  //   }
  //   });
  // });
</script>




<!-- add Rooms -->
<%- include(`./delete.ejs`); %>
<%- include(`./add.ejs`); %>
<%- include(`./edit.ejs`); %>
</body>

</html>